--
-- === Content 3.1.x (Ulduar, Basic AT) ===
--

-- Conquest Vendors
DELETE FROM `creature` WHERE `creature`.`guid` = 85224;
DELETE FROM `creature` WHERE `creature`.`guid` = 86929;
INSERT INTO `creature` (`guid`, `id`, `map`, `spawnMask`, `phaseMask`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `spawndist`, `currentwaypoint`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`) VALUES 
('85224', '33964', '571', '1', '1', '0', '0', '5762.13', '731.637', '653.748', '2.47837', '180', '0', '0', '10080', '8814', '0', '0', '0', '0'),
('86929', '33963', '571', '1', '1', '0', '0', '5931.55', '507.388', '650.263', '1.67552', '180', '0', '0', '10080', '8814', '0', '0', '0', '0');

-- Enable Emalon at VOA
-- DELETE FROM `creature` WHERE `creature`.`guid` = 202593; /* Emalon the Storm Watcher <VOA> */
-- INSERT INTO `creature` ( `guid` , `id` , `map` , `spawnMask` , `phaseMask` , `modelid` , `equipment_id` , `position_x` , `position_y` , `position_z` , `orientation` , `spawntimesecs` , `spawndist` , `currentwaypoint` , `curhealth` , `curmana` , `MovementType` , `npcflag` , `unit_flags` , `dynamicflags` )
-- VALUES (202593, 33993, 624, 3, 1, 0, 0, - 218.726, - 288.57, 91.5494, 1.58825, 604800, 0, 0, 1, 0, 0, 0, 0, 0);
-- -- =============================================================================================

-- 
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 40719;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 40720;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 40717;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 40718;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 45688;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 45689;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 45690;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`item` = 45691;
INSERT INTO `npc_vendor` (`entry`, `slot`, `item`, `maxcount`, `incrtime`, `ExtendedCost`) VALUES
(31579, 0, 40717, 0, 0, 2534),
(31579, 0, 40718, 0, 0, 2534),
(31579, 0, 40719, 0, 0, 2534),
(31579, 0, 40720, 0, 0, 2534),
(31581, 0, 40717, 0, 0, 2534),
(31581, 0, 40718, 0, 0, 2534),
(31581, 0, 40719, 0, 0, 2534),
(31581, 0, 40720, 0, 0, 2534),
(32172, 0, 40717, 0, 0, 2534),
(32172, 0, 40718, 0, 0, 2534),
(32172, 0, 40719, 0, 0, 2534),
(32172, 0, 40720, 0, 0, 2534),
(32172, 0, 45688, 0, 0, 2592),
(32172, 0, 45689, 0, 0, 2593),
(32172, 0, 45690, 0, 0, 2594),
(32172, 0, 45691, 0, 0, 2595);

DELETE FROM `npc_vendor` WHERE `npc_vendor`.`entry` = 32294;
INSERT INTO `npc_vendor` (`entry`, `slot`, `item`, `maxcount`, `incrtime`, `ExtendedCost`) VALUES
(32294, 0, 41727, 0, 0, 2481),
(32294, 0, 41728, 0, 0, 2481),
(32294, 0, 41730, 0, 0, 2481),
(32294, 0, 41732, 0, 0, 2481),
(32294, 0, 41733, 0, 0, 2481),
(32294, 0, 41734, 0, 0, 2481),
(32294, 0, 41735, 0, 0, 2481),
(32294, 0, 41736, 0, 0, 2481),
(32294, 0, 41737, 0, 0, 2481),
(32294, 0, 41738, 0, 0, 2481),
(32294, 0, 41739, 0, 0, 2481),
(32294, 0, 41740, 0, 0, 2481),
(32294, 0, 41742, 0, 0, 2482),
(32294, 0, 41743, 0, 0, 2482),
(32294, 0, 41744, 0, 0, 2482),
(32294, 0, 43956, 0, 0, 2552),
(32294, 0, 44066, 0, 0, 2545),
(32294, 0, 44067, 0, 0, 2546),
(32294, 0, 44068, 0, 0, 2546),
(32294, 0, 44069, 0, 0, 2549),
(32294, 0, 44075, 0, 0, 2549),
(32294, 0, 44076, 0, 0, 2547),
(32294, 0, 44078, 0, 0, 2547),
(32294, 0, 44081, 0, 0, 2547),
(32294, 0, 44082, 0, 0, 2547),
(32294, 0, 44084, 0, 0, 2547),
(32294, 0, 44087, 0, 0, 2547),
(32294, 0, 44088, 0, 0, 2547),
(32294, 0, 44089, 0, 0, 2547),
(32294, 0, 44091, 0, 0, 2542),
(32294, 0, 44092, 0, 0, 2543),
(32294, 0, 44093, 0, 0, 2543),
(32294, 0, 44094, 0, 0, 2544),
(32294, 0, 44095, 0, 0, 2543),
(32294, 0, 44096, 0, 0, 2542),
(32294, 0, 44098, 0, 0, 2544),
(32294, 0, 44099, 0, 0, 2542),
(32294, 0, 44100, 0, 0, 2542),
(32294, 0, 44101, 0, 0, 2542),
(32294, 0, 44102, 0, 0, 2542),
(32294, 0, 44103, 0, 0, 2542),
(32294, 0, 44105, 0, 0, 2542),
(32294, 0, 44107, 0, 0, 2542),
(32294, 0, 44115, 0, 0, 2546),
(32294, 0, 44891, 0, 0, 2577),
(32294, 0, 44892, 0, 0, 2577),
(32294, 0, 44893, 0, 0, 2577),
(32294, 0, 44894, 0, 0, 2577),
(32294, 0, 44895, 0, 0, 2577),
(32294, 0, 44896, 0, 0, 2577),
(32294, 0, 44897, 0, 0, 2577),
(32294, 0, 44898, 0, 0, 2577),
(32294, 0, 44899, 0, 0, 2577),
(32294, 0, 44900, 0, 0, 2577),
(32294, 0, 44901, 0, 0, 2579),
(32294, 0, 44902, 0, 0, 2579),
(32294, 0, 44903, 0, 0, 2579),
(32294, 0, 44904, 0, 0, 2579),
(32294, 0, 44905, 0, 0, 2579),
(32294, 0, 44906, 0, 0, 2579),
(32294, 0, 44907, 0, 0, 2579),
(32294, 0, 44908, 0, 0, 2579),
(32294, 0, 44909, 0, 0, 2579),
(32294, 0, 44910, 0, 0, 2579),
(32294, 0, 44912, 0, 0, 2578),
(32294, 0, 44914, 0, 0, 2578),
(32294, 0, 46057, 0, 0, 2579),
(32294, 0, 46058, 0, 0, 2579),
(32294, 0, 46059, 0, 0, 2579),
(32294, 0, 46060, 0, 0, 2579),
(32294, 0, 46061, 0, 0, 2579),
(32294, 0, 46062, 0, 0, 2579),
(32294, 0, 46063, 0, 0, 2579),
(32294, 0, 46064, 0, 0, 2579),
(32294, 0, 46065, 0, 0, 2579),
(32294, 0, 46066, 0, 0, 2579),
(32294, 0, 46071, 0, 0, 2577),
(32294, 0, 46072, 0, 0, 2577),
(32294, 0, 46073, 0, 0, 2577),
(32294, 0, 46074, 0, 0, 2577),
(32294, 0, 46075, 0, 0, 2577),
(32294, 0, 46076, 0, 0, 2577),
(32294, 0, 46077, 0, 0, 2577),
(32294, 0, 46078, 0, 0, 2577),
(32294, 0, 46079, 0, 0, 2577),
(32294, 0, 46080, 0, 0, 2577),
(32294, 0, 46081, 0, 0, 2578),
(32294, 0, 46082, 0, 0, 2578),
(32294, 0, 46083, 0, 0, 2578),
(32294, 0, 46084, 0, 0, 2578),
(32294, 0, 46085, 0, 0, 2578),
(32294, 0, 46086, 0, 0, 2578),
(32294, 0, 46087, 0, 0, 2578),
(32294, 0, 46088, 0, 0, 2578),
(32294, 0, 44115, 0, 0, 2576);

DELETE FROM `npc_vendor` WHERE `npc_vendor`.`entry` = 32296;
INSERT INTO `npc_vendor` (`entry`, `slot`, `item`, `maxcount`, `incrtime`, `ExtendedCost`) VALUES
(32296, 0, 41727, 0, 0, 2481),
(32296, 0, 41728, 0, 0, 2481),
(32296, 0, 41730, 0, 0, 2481),
(32296, 0, 41732, 0, 0, 2481),
(32296, 0, 41733, 0, 0, 2481),
(32296, 0, 41734, 0, 0, 2481),
(32296, 0, 41735, 0, 0, 2481),
(32296, 0, 41736, 0, 0, 2481),
(32296, 0, 41737, 0, 0, 2481),
(32296, 0, 41738, 0, 0, 2481),
(32296, 0, 41739, 0, 0, 2481),
(32296, 0, 41740, 0, 0, 2481),
(32296, 0, 41742, 0, 0, 2482),
(32296, 0, 41743, 0, 0, 2482),
(32296, 0, 41744, 0, 0, 2482),
(32296, 0, 44066, 0, 0, 2545),
(32296, 0, 44067, 0, 0, 2546),
(32296, 0, 44068, 0, 0, 2546),
(32296, 0, 44069, 0, 0, 2549),
(32296, 0, 44075, 0, 0, 2549),
(32296, 0, 44076, 0, 0, 2547),
(32296, 0, 44077, 0, 0, 2552),
(32296, 0, 44078, 0, 0, 2547),
(32296, 0, 44081, 0, 0, 2547),
(32296, 0, 44082, 0, 0, 2547),
(32296, 0, 44084, 0, 0, 2547),
(32296, 0, 44087, 0, 0, 2547),
(32296, 0, 44088, 0, 0, 2547),
(32296, 0, 44089, 0, 0, 2547),
(32296, 0, 44091, 0, 0, 2542),
(32296, 0, 44092, 0, 0, 2543),
(32296, 0, 44093, 0, 0, 2543),
(32296, 0, 44094, 0, 0, 2544),
(32296, 0, 44095, 0, 0, 2543),
(32296, 0, 44096, 0, 0, 2542),
(32296, 0, 44097, 0, 0, 2544),
(32296, 0, 44099, 0, 0, 2542),
(32296, 0, 44100, 0, 0, 2542),
(32296, 0, 44101, 0, 0, 2542),
(32296, 0, 44102, 0, 0, 2542),
(32296, 0, 44103, 0, 0, 2542),
(32296, 0, 44105, 0, 0, 2542),
(32296, 0, 44107, 0, 0, 2542),
(32296, 0, 44115, 0, 0, 2546),
(32296, 0, 44891, 0, 0, 2577),
(32296, 0, 44892, 0, 0, 2577),
(32296, 0, 44893, 0, 0, 2577),
(32296, 0, 44894, 0, 0, 2577),
(32296, 0, 44895, 0, 0, 2577),
(32296, 0, 44896, 0, 0, 2577),
(32296, 0, 44897, 0, 0, 2577),
(32296, 0, 44898, 0, 0, 2577),
(32296, 0, 44899, 0, 0, 2577),
(32296, 0, 44900, 0, 0, 2577),
(32296, 0, 44901, 0, 0, 2579),
(32296, 0, 44902, 0, 0, 2579),
(32296, 0, 44903, 0, 0, 2579),
(32296, 0, 44904, 0, 0, 2579),
(32296, 0, 44905, 0, 0, 2579),
(32296, 0, 44906, 0, 0, 2579),
(32296, 0, 44907, 0, 0, 2579),
(32296, 0, 44908, 0, 0, 2579),
(32296, 0, 44909, 0, 0, 2579),
(32296, 0, 44910, 0, 0, 2579),
(32296, 0, 44912, 0, 0, 2578),
(32296, 0, 44914, 0, 0, 2578),
(32296, 0, 46057, 0, 0, 2579),
(32296, 0, 46058, 0, 0, 2579),
(32296, 0, 46059, 0, 0, 2579),
(32296, 0, 46060, 0, 0, 2579),
(32296, 0, 46061, 0, 0, 2579),
(32296, 0, 46062, 0, 0, 2579),
(32296, 0, 46063, 0, 0, 2579),
(32296, 0, 46064, 0, 0, 2579),
(32296, 0, 46065, 0, 0, 2579),
(32296, 0, 46066, 0, 0, 2579),
(32296, 0, 46071, 0, 0, 2577),
(32296, 0, 46072, 0, 0, 2577),
(32296, 0, 46073, 0, 0, 2577),
(32296, 0, 46074, 0, 0, 2577),
(32296, 0, 46075, 0, 0, 2577),
(32296, 0, 46076, 0, 0, 2577),
(32296, 0, 46077, 0, 0, 2577),
(32296, 0, 46078, 0, 0, 2577),
(32296, 0, 46079, 0, 0, 2577),
(32296, 0, 46080, 0, 0, 2577),
(32296, 0, 46081, 0, 0, 2578),
(32296, 0, 46082, 0, 0, 2578),
(32296, 0, 46083, 0, 0, 2578),
(32296, 0, 46084, 0, 0, 2578),
(32296, 0, 46085, 0, 0, 2578),
(32296, 0, 46086, 0, 0, 2578),
(32296, 0, 46087, 0, 0, 2578),
(32296, 0, 46088, 0, 0, 2578),
(32296, 0, 44115, 0, 0, 2576);

-- Runed Orbs
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`entry` = 33963 AND `npc_vendor`.`item` = 45087 AND `npc_vendor`.`ExtendedCost` = 2604;
DELETE FROM `npc_vendor` WHERE `npc_vendor`.`entry` = 33964 AND `npc_vendor`.`item` = 45087 AND `npc_vendor`.`ExtendedCost` = 2604;

INSERT INTO `npc_vendor` (`entry`, `slot`, `item`, `maxcount`, `incrtime`,`ExtendedCost`) VALUES
('33963', '0', '45087', '0', '0', '2604'),
('33964', '0', '45087', '0', '0', '2604');

-- Remove Epic gems from vendor
DELETE FROM npc_vendor WHERE entry IN (33680, 33637) AND item != 20815 AND item != 20824;

-- Stormjewel
DELETE FROM `item_loot_template` WHERE `entry` = 46007 AND `item` = 4;
INSERT INTO `item_loot_template` VALUES (46007, 4, 1, 1, 0, -10019, 1);
DELETE FROM `reference_loot_template` WHERE `entry` = 10019;
INSERT INTO `reference_loot_template` VALUES
(10019, 45862, 0, 1, 1, 1, 1),
(10019, 45879, 0, 1, 1, 1, 1),
(10019, 45880, 0, 1, 1, 1, 1),
(10019, 45881, 0, 1, 1, 1, 1),
(10019, 45882, 0, 1, 1, 1, 1),
(10019, 45883, 0, 1, 1, 1, 1),
(10019, 45987, 0, 1, 1, 1, 1);

UPDATE `item_template` SET `Flags` = `Flags` | 524288 WHERE `entry` IN (45862, 45879,45880,45881,45882,45883,45987);
